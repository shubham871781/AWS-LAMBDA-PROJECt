{"ast":null,"code":"function __$styleInject(css) {\n  if (!css) return;\n  if (typeof window == 'undefined') return;\n  var style = document.createElement('style');\n  style.setAttribute('media', 'screen');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n  return css;\n}\n\nimport _asyncToGenerator from '@babel/runtime/helpers/esm/asyncToGenerator';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport React, { forwardRef, useRef, useState, useMemo, useCallback, memo, useEffect } from 'react';\nimport Cropper from 'react-easy-crop';\nimport LocaleReceiver from 'antd/es/locale-provider/LocaleReceiver';\nimport AntModal from 'antd/es/modal';\nimport AntSlider from 'antd/es/slider';\n\n__$styleInject(\".img-crop-modal .img-crop-container {\\n  position: relative;\\n  width: 100%;\\n  height: 40vh;\\n}\\n.img-crop-modal .img-crop-control {\\n  display: flex;\\n  align-items: center;\\n  width: 60%;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.img-crop-modal .img-crop-control:first-of-type {\\n  margin-top: 16px;\\n}\\n.img-crop-modal .img-crop-control:last-of-type {\\n  margin-bottom: -8px;\\n}\\n.img-crop-modal .img-crop-control button {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 34px;\\n  height: 34px;\\n  padding: 0;\\n  font-style: normal;\\n  background: transparent;\\n  border: 0;\\n  outline: 0;\\n  cursor: pointer;\\n}\\n.img-crop-modal .img-crop-control button[disabled] {\\n  cursor: default;\\n}\\n.img-crop-modal .img-crop-control button + div:only-of-type {\\n  flex: 1;\\n  margin: 0 8px;\\n}\\n.img-crop-modal .img-crop-control-zoom button {\\n  font-size: 18px;\\n}\\n.img-crop-modal .img-crop-control-rotate button {\\n  font-size: 16px;\\n}\\n.img-crop-modal .img-crop-control-rotate button:first-of-type {\\n  transform: rotate(-20deg);\\n}\\n.img-crop-modal .img-crop-control-rotate button:last-of-type {\\n  transform: rotate(20deg);\\n}\\n\");\n\nvar _excluded = [\"beforeUpload\", \"accept\"];\nvar cls = 'img-crop';\nvar INIT_ZOOM = 1;\nvar ZOOM_STEP = 0.1;\nvar INIT_ROTATE = 0;\nvar ROTATE_STEP = 1;\nvar MIN_ROTATE = -180;\nvar MAX_ROTATE = 180;\nvar EasyCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var image = props.image,\n      aspect = props.aspect,\n      shape = props.shape,\n      grid = props.grid,\n      zoom = props.zoom,\n      rotate = props.rotate,\n      minZoom = props.minZoom,\n      maxZoom = props.maxZoom,\n      rotateValRef = props.rotateValRef,\n      setZoomValRef = props.setZoomValRef,\n      setRotateValRef = props.setRotateValRef,\n      cropPixelsRef = props.cropPixelsRef,\n      cropperProps = props.cropperProps;\n\n  var _useState = useState({\n    x: 0,\n    y: 0\n  }),\n      crop = _useState[0],\n      onCropChange = _useState[1];\n\n  var _useState2 = useState({\n    width: 0,\n    height: 0\n  }),\n      cropSize = _useState2[0],\n      setCropSize = _useState2[1];\n\n  var onCropComplete = useCallback(function (croppedArea, croppedAreaPixels) {\n    cropPixelsRef.current = croppedAreaPixels;\n  }, [cropPixelsRef]);\n  var onMediaLoaded = useCallback(function (mediaSize) {\n    var width = mediaSize.width,\n        height = mediaSize.height;\n    var ratioWidth = height * aspect;\n\n    if (width > ratioWidth) {\n      setCropSize({\n        width: ratioWidth,\n        height: height\n      });\n    } else {\n      setCropSize({\n        width: width,\n        height: width / aspect\n      });\n    }\n  }, [aspect]);\n\n  var _useState3 = useState(INIT_ZOOM),\n      zoomVal = _useState3[0],\n      setZoomVal = _useState3[1];\n\n  var _useState4 = useState(INIT_ROTATE),\n      rotateVal = _useState4[0],\n      setRotateVal = _useState4[1];\n\n  rotateValRef.current = rotateVal;\n  useEffect(function () {\n    setZoomValRef.current = setZoomVal;\n    setRotateValRef.current = setRotateVal;\n  }, [setRotateValRef, setZoomValRef]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Cropper, Object.assign({}, cropperProps, {\n    ref: ref,\n    image: image,\n    crop: crop,\n    cropSize: cropSize,\n    onCropChange: onCropChange,\n    aspect: aspect,\n    cropShape: shape,\n    showGrid: grid,\n    zoomWithScroll: zoom,\n    zoom: zoomVal,\n    rotation: rotateVal,\n    onZoomChange: setZoomVal,\n    onRotationChange: setRotateVal,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    onCropComplete: onCropComplete,\n    onMediaLoaded: onMediaLoaded,\n    classes: {\n      containerClassName: cls + \"-container\",\n      mediaClassName: cls + \"-media\"\n    }\n  })), zoom && /*#__PURE__*/React.createElement(\"section\", {\n    className: cls + \"-control \" + cls + \"-control-zoom\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setZoomVal(zoomVal - ZOOM_STEP);\n    },\n    disabled: zoomVal - ZOOM_STEP < minZoom\n  }, \"\\uFF0D\"), /*#__PURE__*/React.createElement(AntSlider, {\n    min: minZoom,\n    max: maxZoom,\n    step: ZOOM_STEP,\n    value: zoomVal,\n    onChange: setZoomVal\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setZoomVal(zoomVal + ZOOM_STEP);\n    },\n    disabled: zoomVal + ZOOM_STEP > maxZoom\n  }, \"\\uFF0B\")), rotate && /*#__PURE__*/React.createElement(\"section\", {\n    className: cls + \"-control \" + cls + \"-control-rotate\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setRotateVal(rotateVal - ROTATE_STEP);\n    },\n    disabled: rotateVal === MIN_ROTATE\n  }, \"\\u21BA\"), /*#__PURE__*/React.createElement(AntSlider, {\n    min: MIN_ROTATE,\n    max: MAX_ROTATE,\n    step: ROTATE_STEP,\n    value: rotateVal,\n    onChange: setRotateVal\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setRotateVal(rotateVal + ROTATE_STEP);\n    },\n    disabled: rotateVal === MAX_ROTATE\n  }, \"\\u21BB\")));\n});\nvar EasyCropMemo = /*#__PURE__*/memo(EasyCrop);\nvar ImgCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var _props$aspect = props.aspect,\n      aspect = _props$aspect === void 0 ? 1 : _props$aspect,\n      _props$shape = props.shape,\n      shape = _props$shape === void 0 ? 'rect' : _props$shape,\n      _props$grid = props.grid,\n      grid = _props$grid === void 0 ? false : _props$grid,\n      _props$quality = props.quality,\n      quality = _props$quality === void 0 ? 0.4 : _props$quality,\n      _props$fillColor = props.fillColor,\n      fillColor = _props$fillColor === void 0 ? 'white' : _props$fillColor,\n      _props$zoom = props.zoom,\n      zoom = _props$zoom === void 0 ? true : _props$zoom,\n      _props$rotate = props.rotate,\n      rotate = _props$rotate === void 0 ? false : _props$rotate,\n      _props$minZoom = props.minZoom,\n      minZoom = _props$minZoom === void 0 ? 1 : _props$minZoom,\n      _props$maxZoom = props.maxZoom,\n      maxZoom = _props$maxZoom === void 0 ? 3 : _props$maxZoom,\n      modalTitle = props.modalTitle,\n      modalWidth = props.modalWidth,\n      modalOk = props.modalOk,\n      modalCancel = props.modalCancel,\n      onModalOk = props.onModalOk,\n      onModalCancel = props.onModalCancel,\n      beforeCrop = props.beforeCrop,\n      onUploadFail = props.onUploadFail,\n      cropperProps = props.cropperProps,\n      children = props.children;\n  var cb = useRef({});\n  cb.current.onModalOk = onModalOk;\n  cb.current.onModalCancel = onModalCancel;\n  cb.current.beforeCrop = beforeCrop;\n  cb.current.onUploadFail = onUploadFail;\n  /**\n   * Upload\n   */\n\n  var _useState5 = useState(''),\n      image = _useState5[0],\n      setImage = _useState5[1];\n\n  var fileRef = useRef();\n  var resolveRef = useRef();\n  var rejectRef = useRef();\n  var beforeUploadRef = useRef();\n  var uploadComponent = useMemo(function () {\n    var upload = Array.isArray(children) ? children[0] : children;\n\n    var _upload$props = upload.props,\n        beforeUpload = _upload$props.beforeUpload,\n        accept = _upload$props.accept,\n        restUploadProps = _objectWithoutPropertiesLoose(_upload$props, _excluded);\n\n    beforeUploadRef.current = beforeUpload;\n    return _extends({}, upload, {\n      props: _extends({}, restUploadProps, {\n        accept: accept || 'image/*',\n        beforeUpload: function beforeUpload(file, fileList) {\n          return new Promise( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n              var reader;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.t0 = cb.current.beforeCrop;\n\n                      if (!_context.t0) {\n                        _context.next = 5;\n                        break;\n                      }\n\n                      _context.next = 4;\n                      return cb.current.beforeCrop(file, fileList);\n\n                    case 4:\n                      _context.t0 = !_context.sent;\n\n                    case 5:\n                      if (!_context.t0) {\n                        _context.next = 8;\n                        break;\n                      }\n\n                      reject();\n                      return _context.abrupt(\"return\");\n\n                    case 8:\n                      fileRef.current = file;\n\n                      resolveRef.current = function (newFile) {\n                        cb.current.onModalOk == null ? void 0 : cb.current.onModalOk(newFile);\n                        resolve(newFile);\n                      };\n\n                      rejectRef.current = function (uploadErr) {\n                        cb.current.onUploadFail == null ? void 0 : cb.current.onUploadFail(uploadErr);\n                        reject(uploadErr);\n                      };\n\n                      reader = new FileReader();\n                      reader.addEventListener('load', function () {\n                        return setImage(reader.result);\n                      });\n                      reader.readAsDataURL(file);\n\n                    case 14:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function (_x, _x2) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        }\n      })\n    });\n  }, [children]);\n  /**\n   * Crop\n   */\n\n  var rotateValRef = useRef();\n  var setZoomValRef = useRef();\n  var setRotateValRef = useRef();\n  var cropPixelsRef = useRef();\n  /**\n   * Modal\n   */\n\n  var modalProps = useMemo(function () {\n    var obj = {\n      width: modalWidth,\n      okText: modalOk,\n      cancelText: modalCancel\n    };\n    Object.keys(obj).forEach(function (key) {\n      if (!obj[key]) delete obj[key];\n    });\n    return obj;\n  }, [modalCancel, modalOk, modalWidth]);\n\n  var onClose = function onClose() {\n    setImage('');\n    setZoomValRef.current(INIT_ZOOM);\n    setRotateValRef.current(INIT_ROTATE);\n  };\n\n  var onCancel = useCallback(function () {\n    cb.current.onModalCancel == null ? void 0 : cb.current.onModalCancel();\n    onClose();\n  }, []);\n  var onOk = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var canvas, ctx, imgSource, _cropPixelsRef$curren, cropWidth, cropHeight, cropX, cropY, imgWidth, imgHeight, angle, sine, cosine, squareWidth, squareHeight, squareHalfWidth, squareHalfHeight, imgX, imgY, imgData, _fileRef$current, type, name, uid, onBlob;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            onClose();\n            canvas = document.createElement('canvas');\n            ctx = canvas.getContext('2d');\n            imgSource = document.querySelector(\".\" + cls + \"-media\");\n            _cropPixelsRef$curren = cropPixelsRef.current, cropWidth = _cropPixelsRef$curren.width, cropHeight = _cropPixelsRef$curren.height, cropX = _cropPixelsRef$curren.x, cropY = _cropPixelsRef$curren.y;\n\n            if (rotate && rotateValRef.current !== INIT_ROTATE) {\n              imgWidth = imgSource.naturalWidth, imgHeight = imgSource.naturalHeight;\n              angle = rotateValRef.current * (Math.PI / 180); // get container for rotated image\n\n              sine = Math.abs(Math.sin(angle));\n              cosine = Math.abs(Math.cos(angle));\n              squareWidth = imgWidth * cosine + imgHeight * sine;\n              squareHeight = imgHeight * cosine + imgWidth * sine;\n              canvas.width = squareWidth;\n              canvas.height = squareHeight;\n              ctx.fillStyle = fillColor;\n              ctx.fillRect(0, 0, squareWidth, squareHeight); // rotate container\n\n              squareHalfWidth = squareWidth / 2;\n              squareHalfHeight = squareHeight / 2;\n              ctx.translate(squareHalfWidth, squareHalfHeight);\n              ctx.rotate(angle);\n              ctx.translate(-squareHalfWidth, -squareHalfHeight); // draw rotated image\n\n              imgX = (squareWidth - imgWidth) / 2;\n              imgY = (squareHeight - imgHeight) / 2;\n              ctx.drawImage(imgSource, 0, 0, imgWidth, imgHeight, imgX, imgY, imgWidth, imgHeight); // crop rotated image\n\n              imgData = ctx.getImageData(0, 0, squareWidth, squareHeight);\n              canvas.width = cropWidth;\n              canvas.height = cropHeight;\n              ctx.putImageData(imgData, -cropX, -cropY);\n            } else {\n              canvas.width = cropWidth;\n              canvas.height = cropHeight;\n              ctx.fillStyle = fillColor;\n              ctx.fillRect(0, 0, cropWidth, cropHeight);\n              ctx.drawImage(imgSource, cropX, cropY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n            } // get the new image\n\n\n            _fileRef$current = fileRef.current, type = _fileRef$current.type, name = _fileRef$current.name, uid = _fileRef$current.uid;\n\n            onBlob = /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(blob) {\n                var newFile, res, passedFile, _type;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        newFile = new File([blob], name, {\n                          type: type\n                        });\n                        newFile.uid = uid;\n\n                        if (!(typeof beforeUploadRef.current !== 'function')) {\n                          _context2.next = 4;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 4:\n                        res = beforeUploadRef.current(newFile, [newFile]);\n\n                        if (!(typeof res !== 'boolean' && !res)) {\n                          _context2.next = 8;\n                          break;\n                        }\n\n                        console.error('beforeUpload must return a boolean or Promise');\n                        return _context2.abrupt(\"return\");\n\n                      case 8:\n                        if (!(res === true)) {\n                          _context2.next = 10;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 10:\n                        if (!(res === false)) {\n                          _context2.next = 12;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", rejectRef.current('not upload'));\n\n                      case 12:\n                        if (!(res && typeof res.then === 'function')) {\n                          _context2.next = 25;\n                          break;\n                        }\n\n                        _context2.prev = 13;\n                        _context2.next = 16;\n                        return res;\n\n                      case 16:\n                        passedFile = _context2.sent;\n                        _type = Object.prototype.toString.call(passedFile);\n                        if (_type === '[object File]' || _type === '[object Blob]') newFile = passedFile;\n                        resolveRef.current(newFile);\n                        _context2.next = 25;\n                        break;\n\n                      case 22:\n                        _context2.prev = 22;\n                        _context2.t0 = _context2[\"catch\"](13);\n                        rejectRef.current(_context2.t0);\n\n                      case 25:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[13, 22]]);\n              }));\n\n              return function onBlob(_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }();\n\n            canvas.toBlob(onBlob, type, quality);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  })), [fillColor, quality, rotate]);\n\n  var getComponent = function getComponent(titleOfModal) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, uploadComponent, image && /*#__PURE__*/React.createElement(AntModal, Object.assign({\n      visible: true,\n      wrapClassName: cls + \"-modal\",\n      title: titleOfModal,\n      onOk: onOk,\n      onCancel: onCancel,\n      maskClosable: false,\n      destroyOnClose: true\n    }, modalProps), /*#__PURE__*/React.createElement(EasyCropMemo, {\n      ref: ref,\n      image: image,\n      aspect: aspect,\n      shape: shape,\n      grid: grid,\n      zoom: zoom,\n      rotate: rotate,\n      rotateValRef: rotateValRef,\n      setZoomValRef: setZoomValRef,\n      setRotateValRef: setRotateValRef,\n      minZoom: minZoom,\n      maxZoom: maxZoom,\n      cropPixelsRef: cropPixelsRef,\n      cropperProps: cropperProps\n    })));\n  };\n\n  if (modalTitle) return getComponent(modalTitle);\n  return /*#__PURE__*/React.createElement(LocaleReceiver, null, function (locale, code) {\n    return getComponent(code === 'zh-cn' ? '编辑图片' : 'Edit image');\n  });\n});\nexport { ImgCrop as default };","map":{"version":3,"sources":["C:/Users/Admin/OneDrive/Documents/shubhamcode/TodayNewwork27admin/node_modules/antd-img-crop/dist/antd-img-crop.esm.js"],"names":["__$styleInject","css","window","style","document","createElement","setAttribute","innerHTML","head","appendChild","_asyncToGenerator","_extends","_objectWithoutPropertiesLoose","_regeneratorRuntime","React","forwardRef","useRef","useState","useMemo","useCallback","memo","useEffect","Cropper","LocaleReceiver","AntModal","AntSlider","_excluded","cls","INIT_ZOOM","ZOOM_STEP","INIT_ROTATE","ROTATE_STEP","MIN_ROTATE","MAX_ROTATE","EasyCrop","props","ref","image","aspect","shape","grid","zoom","rotate","minZoom","maxZoom","rotateValRef","setZoomValRef","setRotateValRef","cropPixelsRef","cropperProps","_useState","x","y","crop","onCropChange","_useState2","width","height","cropSize","setCropSize","onCropComplete","croppedArea","croppedAreaPixels","current","onMediaLoaded","mediaSize","ratioWidth","_useState3","zoomVal","setZoomVal","_useState4","rotateVal","setRotateVal","Fragment","Object","assign","cropShape","showGrid","zoomWithScroll","rotation","onZoomChange","onRotationChange","classes","containerClassName","mediaClassName","className","onClick","disabled","min","max","step","value","onChange","EasyCropMemo","ImgCrop","_props$aspect","_props$shape","_props$grid","_props$quality","quality","_props$fillColor","fillColor","_props$zoom","_props$rotate","_props$minZoom","_props$maxZoom","modalTitle","modalWidth","modalOk","modalCancel","onModalOk","onModalCancel","beforeCrop","onUploadFail","children","cb","_useState5","setImage","fileRef","resolveRef","rejectRef","beforeUploadRef","uploadComponent","upload","Array","isArray","_upload$props","beforeUpload","accept","restUploadProps","file","fileList","Promise","_ref","mark","_callee","resolve","reject","reader","wrap","_callee$","_context","prev","next","t0","sent","abrupt","newFile","uploadErr","FileReader","addEventListener","result","readAsDataURL","stop","_x","_x2","apply","arguments","modalProps","obj","okText","cancelText","keys","forEach","key","onClose","onCancel","onOk","_callee3","canvas","ctx","imgSource","_cropPixelsRef$curren","cropWidth","cropHeight","cropX","cropY","imgWidth","imgHeight","angle","sine","cosine","squareWidth","squareHeight","squareHalfWidth","squareHalfHeight","imgX","imgY","imgData","_fileRef$current","type","name","uid","onBlob","_callee3$","_context3","getContext","querySelector","naturalWidth","naturalHeight","Math","PI","abs","sin","cos","fillStyle","fillRect","translate","drawImage","getImageData","putImageData","_ref3","_callee2","blob","res","passedFile","_type","_callee2$","_context2","File","console","error","then","prototype","toString","call","_x3","toBlob","getComponent","titleOfModal","visible","wrapClassName","title","maskClosable","destroyOnClose","locale","code","default"],"mappings":"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","sourcesContent":["function __$styleInject(css) {\n    if (!css) return;\n\n    if (typeof window == 'undefined') return;\n    var style = document.createElement('style');\n    style.setAttribute('media', 'screen');\n\n    style.innerHTML = css;\n    document.head.appendChild(style);\n    return css;\n}\n\nimport _asyncToGenerator from '@babel/runtime/helpers/esm/asyncToGenerator';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport React, { forwardRef, useRef, useState, useMemo, useCallback, memo, useEffect } from 'react';\nimport Cropper from 'react-easy-crop';\nimport LocaleReceiver from 'antd/es/locale-provider/LocaleReceiver';\nimport AntModal from 'antd/es/modal';\nimport AntSlider from 'antd/es/slider';\n\n__$styleInject(\".img-crop-modal .img-crop-container {\\n  position: relative;\\n  width: 100%;\\n  height: 40vh;\\n}\\n.img-crop-modal .img-crop-control {\\n  display: flex;\\n  align-items: center;\\n  width: 60%;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.img-crop-modal .img-crop-control:first-of-type {\\n  margin-top: 16px;\\n}\\n.img-crop-modal .img-crop-control:last-of-type {\\n  margin-bottom: -8px;\\n}\\n.img-crop-modal .img-crop-control button {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 34px;\\n  height: 34px;\\n  padding: 0;\\n  font-style: normal;\\n  background: transparent;\\n  border: 0;\\n  outline: 0;\\n  cursor: pointer;\\n}\\n.img-crop-modal .img-crop-control button[disabled] {\\n  cursor: default;\\n}\\n.img-crop-modal .img-crop-control button + div:only-of-type {\\n  flex: 1;\\n  margin: 0 8px;\\n}\\n.img-crop-modal .img-crop-control-zoom button {\\n  font-size: 18px;\\n}\\n.img-crop-modal .img-crop-control-rotate button {\\n  font-size: 16px;\\n}\\n.img-crop-modal .img-crop-control-rotate button:first-of-type {\\n  transform: rotate(-20deg);\\n}\\n.img-crop-modal .img-crop-control-rotate button:last-of-type {\\n  transform: rotate(20deg);\\n}\\n\");\n\nvar _excluded = [\"beforeUpload\", \"accept\"];\nvar cls = 'img-crop';\nvar INIT_ZOOM = 1;\nvar ZOOM_STEP = 0.1;\nvar INIT_ROTATE = 0;\nvar ROTATE_STEP = 1;\nvar MIN_ROTATE = -180;\nvar MAX_ROTATE = 180;\nvar EasyCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var image = props.image,\n      aspect = props.aspect,\n      shape = props.shape,\n      grid = props.grid,\n      zoom = props.zoom,\n      rotate = props.rotate,\n      minZoom = props.minZoom,\n      maxZoom = props.maxZoom,\n      rotateValRef = props.rotateValRef,\n      setZoomValRef = props.setZoomValRef,\n      setRotateValRef = props.setRotateValRef,\n      cropPixelsRef = props.cropPixelsRef,\n      cropperProps = props.cropperProps;\n\n  var _useState = useState({\n    x: 0,\n    y: 0\n  }),\n      crop = _useState[0],\n      onCropChange = _useState[1];\n\n  var _useState2 = useState({\n    width: 0,\n    height: 0\n  }),\n      cropSize = _useState2[0],\n      setCropSize = _useState2[1];\n\n  var onCropComplete = useCallback(function (croppedArea, croppedAreaPixels) {\n    cropPixelsRef.current = croppedAreaPixels;\n  }, [cropPixelsRef]);\n  var onMediaLoaded = useCallback(function (mediaSize) {\n    var width = mediaSize.width,\n        height = mediaSize.height;\n    var ratioWidth = height * aspect;\n\n    if (width > ratioWidth) {\n      setCropSize({\n        width: ratioWidth,\n        height: height\n      });\n    } else {\n      setCropSize({\n        width: width,\n        height: width / aspect\n      });\n    }\n  }, [aspect]);\n\n  var _useState3 = useState(INIT_ZOOM),\n      zoomVal = _useState3[0],\n      setZoomVal = _useState3[1];\n\n  var _useState4 = useState(INIT_ROTATE),\n      rotateVal = _useState4[0],\n      setRotateVal = _useState4[1];\n\n  rotateValRef.current = rotateVal;\n  useEffect(function () {\n    setZoomValRef.current = setZoomVal;\n    setRotateValRef.current = setRotateVal;\n  }, [setRotateValRef, setZoomValRef]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Cropper, Object.assign({}, cropperProps, {\n    ref: ref,\n    image: image,\n    crop: crop,\n    cropSize: cropSize,\n    onCropChange: onCropChange,\n    aspect: aspect,\n    cropShape: shape,\n    showGrid: grid,\n    zoomWithScroll: zoom,\n    zoom: zoomVal,\n    rotation: rotateVal,\n    onZoomChange: setZoomVal,\n    onRotationChange: setRotateVal,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    onCropComplete: onCropComplete,\n    onMediaLoaded: onMediaLoaded,\n    classes: {\n      containerClassName: cls + \"-container\",\n      mediaClassName: cls + \"-media\"\n    }\n  })), zoom && /*#__PURE__*/React.createElement(\"section\", {\n    className: cls + \"-control \" + cls + \"-control-zoom\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setZoomVal(zoomVal - ZOOM_STEP);\n    },\n    disabled: zoomVal - ZOOM_STEP < minZoom\n  }, \"\\uFF0D\"), /*#__PURE__*/React.createElement(AntSlider, {\n    min: minZoom,\n    max: maxZoom,\n    step: ZOOM_STEP,\n    value: zoomVal,\n    onChange: setZoomVal\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setZoomVal(zoomVal + ZOOM_STEP);\n    },\n    disabled: zoomVal + ZOOM_STEP > maxZoom\n  }, \"\\uFF0B\")), rotate && /*#__PURE__*/React.createElement(\"section\", {\n    className: cls + \"-control \" + cls + \"-control-rotate\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setRotateVal(rotateVal - ROTATE_STEP);\n    },\n    disabled: rotateVal === MIN_ROTATE\n  }, \"\\u21BA\"), /*#__PURE__*/React.createElement(AntSlider, {\n    min: MIN_ROTATE,\n    max: MAX_ROTATE,\n    step: ROTATE_STEP,\n    value: rotateVal,\n    onChange: setRotateVal\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setRotateVal(rotateVal + ROTATE_STEP);\n    },\n    disabled: rotateVal === MAX_ROTATE\n  }, \"\\u21BB\")));\n});\nvar EasyCropMemo = /*#__PURE__*/memo(EasyCrop);\nvar ImgCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var _props$aspect = props.aspect,\n      aspect = _props$aspect === void 0 ? 1 : _props$aspect,\n      _props$shape = props.shape,\n      shape = _props$shape === void 0 ? 'rect' : _props$shape,\n      _props$grid = props.grid,\n      grid = _props$grid === void 0 ? false : _props$grid,\n      _props$quality = props.quality,\n      quality = _props$quality === void 0 ? 0.4 : _props$quality,\n      _props$fillColor = props.fillColor,\n      fillColor = _props$fillColor === void 0 ? 'white' : _props$fillColor,\n      _props$zoom = props.zoom,\n      zoom = _props$zoom === void 0 ? true : _props$zoom,\n      _props$rotate = props.rotate,\n      rotate = _props$rotate === void 0 ? false : _props$rotate,\n      _props$minZoom = props.minZoom,\n      minZoom = _props$minZoom === void 0 ? 1 : _props$minZoom,\n      _props$maxZoom = props.maxZoom,\n      maxZoom = _props$maxZoom === void 0 ? 3 : _props$maxZoom,\n      modalTitle = props.modalTitle,\n      modalWidth = props.modalWidth,\n      modalOk = props.modalOk,\n      modalCancel = props.modalCancel,\n      onModalOk = props.onModalOk,\n      onModalCancel = props.onModalCancel,\n      beforeCrop = props.beforeCrop,\n      onUploadFail = props.onUploadFail,\n      cropperProps = props.cropperProps,\n      children = props.children;\n  var cb = useRef({});\n  cb.current.onModalOk = onModalOk;\n  cb.current.onModalCancel = onModalCancel;\n  cb.current.beforeCrop = beforeCrop;\n  cb.current.onUploadFail = onUploadFail;\n  /**\n   * Upload\n   */\n\n  var _useState5 = useState(''),\n      image = _useState5[0],\n      setImage = _useState5[1];\n\n  var fileRef = useRef();\n  var resolveRef = useRef();\n  var rejectRef = useRef();\n  var beforeUploadRef = useRef();\n  var uploadComponent = useMemo(function () {\n    var upload = Array.isArray(children) ? children[0] : children;\n\n    var _upload$props = upload.props,\n        beforeUpload = _upload$props.beforeUpload,\n        accept = _upload$props.accept,\n        restUploadProps = _objectWithoutPropertiesLoose(_upload$props, _excluded);\n\n    beforeUploadRef.current = beforeUpload;\n    return _extends({}, upload, {\n      props: _extends({}, restUploadProps, {\n        accept: accept || 'image/*',\n        beforeUpload: function beforeUpload(file, fileList) {\n          return new Promise( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n              var reader;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.t0 = cb.current.beforeCrop;\n\n                      if (!_context.t0) {\n                        _context.next = 5;\n                        break;\n                      }\n\n                      _context.next = 4;\n                      return cb.current.beforeCrop(file, fileList);\n\n                    case 4:\n                      _context.t0 = !_context.sent;\n\n                    case 5:\n                      if (!_context.t0) {\n                        _context.next = 8;\n                        break;\n                      }\n\n                      reject();\n                      return _context.abrupt(\"return\");\n\n                    case 8:\n                      fileRef.current = file;\n\n                      resolveRef.current = function (newFile) {\n                        cb.current.onModalOk == null ? void 0 : cb.current.onModalOk(newFile);\n                        resolve(newFile);\n                      };\n\n                      rejectRef.current = function (uploadErr) {\n                        cb.current.onUploadFail == null ? void 0 : cb.current.onUploadFail(uploadErr);\n                        reject(uploadErr);\n                      };\n\n                      reader = new FileReader();\n                      reader.addEventListener('load', function () {\n                        return setImage(reader.result);\n                      });\n                      reader.readAsDataURL(file);\n\n                    case 14:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function (_x, _x2) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        }\n      })\n    });\n  }, [children]);\n  /**\n   * Crop\n   */\n\n  var rotateValRef = useRef();\n  var setZoomValRef = useRef();\n  var setRotateValRef = useRef();\n  var cropPixelsRef = useRef();\n  /**\n   * Modal\n   */\n\n  var modalProps = useMemo(function () {\n    var obj = {\n      width: modalWidth,\n      okText: modalOk,\n      cancelText: modalCancel\n    };\n    Object.keys(obj).forEach(function (key) {\n      if (!obj[key]) delete obj[key];\n    });\n    return obj;\n  }, [modalCancel, modalOk, modalWidth]);\n\n  var onClose = function onClose() {\n    setImage('');\n    setZoomValRef.current(INIT_ZOOM);\n    setRotateValRef.current(INIT_ROTATE);\n  };\n\n  var onCancel = useCallback(function () {\n    cb.current.onModalCancel == null ? void 0 : cb.current.onModalCancel();\n    onClose();\n  }, []);\n  var onOk = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var canvas, ctx, imgSource, _cropPixelsRef$curren, cropWidth, cropHeight, cropX, cropY, imgWidth, imgHeight, angle, sine, cosine, squareWidth, squareHeight, squareHalfWidth, squareHalfHeight, imgX, imgY, imgData, _fileRef$current, type, name, uid, onBlob;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            onClose();\n            canvas = document.createElement('canvas');\n            ctx = canvas.getContext('2d');\n            imgSource = document.querySelector(\".\" + cls + \"-media\");\n            _cropPixelsRef$curren = cropPixelsRef.current, cropWidth = _cropPixelsRef$curren.width, cropHeight = _cropPixelsRef$curren.height, cropX = _cropPixelsRef$curren.x, cropY = _cropPixelsRef$curren.y;\n\n            if (rotate && rotateValRef.current !== INIT_ROTATE) {\n              imgWidth = imgSource.naturalWidth, imgHeight = imgSource.naturalHeight;\n              angle = rotateValRef.current * (Math.PI / 180); // get container for rotated image\n\n              sine = Math.abs(Math.sin(angle));\n              cosine = Math.abs(Math.cos(angle));\n              squareWidth = imgWidth * cosine + imgHeight * sine;\n              squareHeight = imgHeight * cosine + imgWidth * sine;\n              canvas.width = squareWidth;\n              canvas.height = squareHeight;\n              ctx.fillStyle = fillColor;\n              ctx.fillRect(0, 0, squareWidth, squareHeight); // rotate container\n\n              squareHalfWidth = squareWidth / 2;\n              squareHalfHeight = squareHeight / 2;\n              ctx.translate(squareHalfWidth, squareHalfHeight);\n              ctx.rotate(angle);\n              ctx.translate(-squareHalfWidth, -squareHalfHeight); // draw rotated image\n\n              imgX = (squareWidth - imgWidth) / 2;\n              imgY = (squareHeight - imgHeight) / 2;\n              ctx.drawImage(imgSource, 0, 0, imgWidth, imgHeight, imgX, imgY, imgWidth, imgHeight); // crop rotated image\n\n              imgData = ctx.getImageData(0, 0, squareWidth, squareHeight);\n              canvas.width = cropWidth;\n              canvas.height = cropHeight;\n              ctx.putImageData(imgData, -cropX, -cropY);\n            } else {\n              canvas.width = cropWidth;\n              canvas.height = cropHeight;\n              ctx.fillStyle = fillColor;\n              ctx.fillRect(0, 0, cropWidth, cropHeight);\n              ctx.drawImage(imgSource, cropX, cropY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n            } // get the new image\n\n\n            _fileRef$current = fileRef.current, type = _fileRef$current.type, name = _fileRef$current.name, uid = _fileRef$current.uid;\n\n            onBlob = /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(blob) {\n                var newFile, res, passedFile, _type;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        newFile = new File([blob], name, {\n                          type: type\n                        });\n                        newFile.uid = uid;\n\n                        if (!(typeof beforeUploadRef.current !== 'function')) {\n                          _context2.next = 4;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 4:\n                        res = beforeUploadRef.current(newFile, [newFile]);\n\n                        if (!(typeof res !== 'boolean' && !res)) {\n                          _context2.next = 8;\n                          break;\n                        }\n\n                        console.error('beforeUpload must return a boolean or Promise');\n                        return _context2.abrupt(\"return\");\n\n                      case 8:\n                        if (!(res === true)) {\n                          _context2.next = 10;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 10:\n                        if (!(res === false)) {\n                          _context2.next = 12;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", rejectRef.current('not upload'));\n\n                      case 12:\n                        if (!(res && typeof res.then === 'function')) {\n                          _context2.next = 25;\n                          break;\n                        }\n\n                        _context2.prev = 13;\n                        _context2.next = 16;\n                        return res;\n\n                      case 16:\n                        passedFile = _context2.sent;\n                        _type = Object.prototype.toString.call(passedFile);\n                        if (_type === '[object File]' || _type === '[object Blob]') newFile = passedFile;\n                        resolveRef.current(newFile);\n                        _context2.next = 25;\n                        break;\n\n                      case 22:\n                        _context2.prev = 22;\n                        _context2.t0 = _context2[\"catch\"](13);\n                        rejectRef.current(_context2.t0);\n\n                      case 25:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[13, 22]]);\n              }));\n\n              return function onBlob(_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }();\n\n            canvas.toBlob(onBlob, type, quality);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  })), [fillColor, quality, rotate]);\n\n  var getComponent = function getComponent(titleOfModal) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, uploadComponent, image && /*#__PURE__*/React.createElement(AntModal, Object.assign({\n      visible: true,\n      wrapClassName: cls + \"-modal\",\n      title: titleOfModal,\n      onOk: onOk,\n      onCancel: onCancel,\n      maskClosable: false,\n      destroyOnClose: true\n    }, modalProps), /*#__PURE__*/React.createElement(EasyCropMemo, {\n      ref: ref,\n      image: image,\n      aspect: aspect,\n      shape: shape,\n      grid: grid,\n      zoom: zoom,\n      rotate: rotate,\n      rotateValRef: rotateValRef,\n      setZoomValRef: setZoomValRef,\n      setRotateValRef: setRotateValRef,\n      minZoom: minZoom,\n      maxZoom: maxZoom,\n      cropPixelsRef: cropPixelsRef,\n      cropperProps: cropperProps\n    })));\n  };\n\n  if (modalTitle) return getComponent(modalTitle);\n  return /*#__PURE__*/React.createElement(LocaleReceiver, null, function (locale, code) {\n    return getComponent(code === 'zh-cn' ? '编辑图片' : 'Edit image');\n  });\n});\n\nexport { ImgCrop as default };\n"]},"metadata":{},"sourceType":"module"}